# GameObject 静态方法

## 1. 创建自带几何体

Unity提供了创建基本几何体的静态方法，可以快速创建常用的3D原始体：

```csharp
// 创建一个立方体
GameObject cube = GameObject.CreatePrimitive(PrimitiveType.Cube);

// 创建一个球体
GameObject sphere = GameObject.CreatePrimitive(PrimitiveType.Sphere);

// 创建一个胶囊体
GameObject capsule = GameObject.CreatePrimitive(PrimitiveType.Capsule);

// 创建一个圆柱体
GameObject cylinder = GameObject.CreatePrimitive(PrimitiveType.Cylinder);

// 创建一个平面
GameObject plane = GameObject.CreatePrimitive(PrimitiveType.Plane);

// 创建一个四边形
GameObject quad = GameObject.CreatePrimitive(PrimitiveType.Quad);
```

这些创建出来的几何体自带网格渲染器(MeshRenderer)和碰撞器(Collider)组件。

## 2. 查找场景中对象

GameObject类提供了多种静态方法来查找场景中的游戏对象：

```csharp
// 通过名称查找单个对象（不推荐在Update中频繁调用，性能消耗大）
GameObject obj = GameObject.Find("ObjectName");

// 通过标签查找单个对象
GameObject player = GameObject.FindWithTag("Player");

// 通过标签查找多个对象
GameObject[] enemies = GameObject.FindGameObjectsWithTag("Enemy");

// 查找具有特定组件类型的对象（返回第一个找到的对象）
GameObject objWithComponent = GameObject.FindObjectOfType<Rigidbody>().gameObject;

// 查找具有特定组件类型的所有对象
GameObject[] objsWithComponent = GameObject.FindObjectsOfType<Rigidbody>().Select(rb => rb.gameObject).ToArray();
```

注意事项：
- 这些查找方法在运行时较为耗费性能，尤其是`Find`和`FindObjectOfType`
- 建议在初始化阶段（如Awake或Start）使用这些方法，而不是在Update等频繁调用的方法中使用
- 对于需要频繁访问的对象，建议使用引用缓存而不是反复查找

## 3. 删除对象

GameObject类提供了静态方法来删除游戏对象：

```csharp
// 立即销毁对象
GameObject.Destroy(gameObject);

// 延迟销毁对象（2秒后）
GameObject.Destroy(gameObject, 2.0f);

// 立即销毁对象（仅在编辑器模式下）
GameObject.DestroyImmediate(gameObject);

// 安全地立即销毁对象（可在编辑器和运行时使用）
GameObject.DestroyImmediate(gameObject, true);
```

注意事项：
- `Destroy`方法实际上是在当前帧结束时销毁对象，而不是立即销毁
- `DestroyImmediate`会立即销毁对象，主要用于编辑器脚本，在游戏运行时应谨慎使用
- 被销毁的对象引用不会自动设为null，但访问已销毁对象的组件会返回null

## 4. 过场景不移除

Unity在切换场景时会默认销毁所有游戏对象，但有时我们需要某些对象（如音乐播放器、游戏管理器等）在场景切换时保持存在。GameObject类提供了静态方法来实现这一功能：

```csharp
// 使对象在加载新场景时不被销毁
GameObject.DontDestroyOnLoad(gameObject);
```

使用示例：

```csharp
public class GameManager : MonoBehaviour
{
    private static GameManager instance;
    
    private void Awake()
    {
        // 单例模式实现
        if (instance == null)
        {
            instance = this;
            // 确保游戏管理器在场景切换时不被销毁
            GameObject.DontDestroyOnLoad(gameObject);
        }
        else
        {
            // 如果场景中已存在GameManager实例，则销毁当前对象
            Destroy(gameObject);
        }
    }
}
```

注意事项：
- 只能对根游戏对象（不是其他对象的子对象）使用`DontDestroyOnLoad`
- 如果对子对象使用此方法，Unity会自动将其变为根对象
- 被标记为`DontDestroyOnLoad`的对象只有在应用程序退出或显式调用`Destroy`时才会被销毁
- 通常与单例模式结合使用，确保场景间只有一个实例存在